{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { getGlobalObject } from '@sentry/utils';\nvar global = getGlobalObject();\n/** UserAgent */\nvar UserAgent = /** @class */function () {\n  function UserAgent() {\n    /**\n     * @inheritDoc\n     */\n    this.name = UserAgent.id;\n  }\n  /**\n   * @inheritDoc\n   */\n  UserAgent.prototype.setupOnce = function () {\n    addGlobalEventProcessor(function (event) {\n      if (getCurrentHub().getIntegration(UserAgent)) {\n        // if none of the information we want exists, don't bother\n        if (!global.navigator && !global.location && !global.document) {\n          return event;\n        }\n        // grab as much info as exists and add it to the event\n        var url = event.request && event.request.url || global.location && global.location.href;\n        var referrer = (global.document || {}).referrer;\n        var userAgent = (global.navigator || {}).userAgent;\n        var headers = __assign(__assign(__assign({}, event.request && event.request.headers), referrer && {\n          Referer: referrer\n        }), userAgent && {\n          'User-Agent': userAgent\n        });\n        var request = __assign(__assign({}, url && {\n          url: url\n        }), {\n          headers: headers\n        });\n        return __assign(__assign({}, event), {\n          request: request\n        });\n      }\n      return event;\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n  UserAgent.id = 'UserAgent';\n  return UserAgent;\n}();\nexport { UserAgent };","map":{"version":3,"names":["addGlobalEventProcessor","getCurrentHub","getGlobalObject","global","UserAgent","name","id","prototype","setupOnce","event","getIntegration","navigator","location","document","url","request","href","referrer","userAgent","headers","__assign","Referer"],"sources":["../../../../src/integrations/useragent.ts"],"sourcesContent":["import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { Event, Integration } from '@sentry/types';\nimport { getGlobalObject } from '@sentry/utils';\n\nconst global = getGlobalObject<Window>();\n\n/** UserAgent */\nexport class UserAgent implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'UserAgent';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = UserAgent.id;\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(): void {\n    addGlobalEventProcessor((event: Event) => {\n      if (getCurrentHub().getIntegration(UserAgent)) {\n        // if none of the information we want exists, don't bother\n        if (!global.navigator && !global.location && !global.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        const url = (event.request && event.request.url) || (global.location && global.location.href);\n        const { referrer } = global.document || {};\n        const { userAgent } = global.navigator || {};\n\n        const headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && { Referer: referrer }),\n          ...(userAgent && { 'User-Agent': userAgent }),\n        };\n        const request = { ...(url && { url }), headers };\n\n        return { ...event, request };\n      }\n      return event;\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,uBAAuB,EAAEC,aAAa,QAAQ,cAAc;AAErE,SAASC,eAAe,QAAQ,eAAe;AAE/C,IAAMC,MAAM,GAAGD,eAAe,EAAU;AAExC;AACA,IAAAE,SAAA;EAAA,SAAAA,UAAA;IAME;;;IAGO,KAAAC,IAAI,GAAWD,SAAS,CAACE,EAAE;EA8BpC;EA5BE;;;EAGOF,SAAA,CAAAG,SAAA,CAAAC,SAAS,GAAhB;IACER,uBAAuB,CAAC,UAACS,KAAY;MACnC,IAAIR,aAAa,EAAE,CAACS,cAAc,CAACN,SAAS,CAAC,EAAE;QAC7C;QACA,IAAI,CAACD,MAAM,CAACQ,SAAS,IAAI,CAACR,MAAM,CAACS,QAAQ,IAAI,CAACT,MAAM,CAACU,QAAQ,EAAE;UAC7D,OAAOJ,KAAK;;QAGd;QACA,IAAMK,GAAG,GAAIL,KAAK,CAACM,OAAO,IAAIN,KAAK,CAACM,OAAO,CAACD,GAAG,IAAMX,MAAM,CAACS,QAAQ,IAAIT,MAAM,CAACS,QAAQ,CAACI,IAAK;QACrF,IAAAC,QAAA,IAAAd,MAAA,CAAAU,QAAA,QAAAI,QAAQ;QACR,IAAAC,SAAA,IAAAf,MAAA,CAAAQ,SAAA,QAAAO,SAAS;QAEjB,IAAMC,OAAO,GAAAC,QAAA,CAAAA,QAAA,CAAAA,QAAA,KACPX,KAAK,CAACM,OAAO,IAAIN,KAAK,CAACM,OAAO,CAACI,OAAQ,GACvCF,QAAQ,IAAI;UAAEI,OAAO,EAAEJ;QAAQ,CAAG,GAClCC,SAAS,IAAI;UAAE,YAAY,EAAEA;QAAS,CAAG,CAC9C;QACD,IAAMH,OAAO,GAAAK,QAAA,CAAAA,QAAA,KAASN,GAAG,IAAI;UAAEA,GAAG,EAAAA;QAAA,CAAG;UAAEK,OAAO,EAAAA;QAAA,EAAE;QAEhD,OAAAC,QAAA,CAAAA,QAAA,KAAYX,KAAK;UAAEM,OAAO,EAAAA;QAAA;;MAE5B,OAAON,KAAK;IACd,CAAC,CAAC;EACJ,CAAC;EArCD;;;EAGcL,SAAA,CAAAE,EAAE,GAAW,WAAW;EAmCxC,OAAAF,SAAC;CAAA,CAvCD;SAAaA,SAAS"},"metadata":{},"sourceType":"module"}