{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";\nvar _jsxFileName = \"/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/src/views/Rating.jsx\",\n  _templateObject,\n  _s = $RefreshSig$();\n/* eslint-disable react/display-name */\nimport React, { useState } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { Container } from '@mui/material';\nimport Header from '../components/Headers/Header';\nimport DataTable from 'react-data-table-component';\nimport orderBy from 'lodash/orderBy';\nimport CustomLoader from '../components/Loader/CustomLoader';\nimport { useQuery, gql } from '@apollo/client';\nimport { reviews } from '../apollo';\nimport useGlobalStyles from '../utils/globalStyles';\nimport SearchBar from '../components/TableHeader/SearchBar';\nimport { customStyles } from '../utils/tableCustomStyles';\nimport TableHeader from '../components/TableHeader';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst REVIEWS = gql(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), reviews);\nconst Ratings = props => {\n  _s();\n  const {\n    t\n  } = props;\n  const [searchQuery, setSearchQuery] = useState('');\n  const onChangeSearch = e => setSearchQuery(e.target.value);\n  const restaurantId = localStorage.getItem('restaurantId');\n  const {\n    data,\n    error: errorQuery,\n    loading: loadingQuery\n  } = useQuery(REVIEWS, {\n    variables: {\n      restaurant: restaurantId\n    }\n  });\n  const columns = [{\n    name: t('Name'),\n    sortable: true,\n    selector: 'user.name',\n    cell: row => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: row.order.user.name\n    }, void 0, false)\n  }, {\n    name: t('Email'),\n    sortable: true,\n    selector: 'user.email',\n    cell: row => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: row.order.user.email\n    }, void 0, false)\n  }, {\n    name: t('Items'),\n    cell: row => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: row.order.items.map(_ref => {\n        let {\n          title\n        } = _ref;\n        return title + '\\t';\n      })\n    }, void 0, false)\n  }, {\n    name: t('Review'),\n    sortable: true,\n    selector: 'description',\n    cell: row => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: row.description\n    }, void 0, false)\n  }, {\n    name: t('Ratings'),\n    sortable: true,\n    selector: 'rating',\n    cell: row => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: row.rating\n    }, void 0, false)\n  }];\n  const propExists = (obj, path) => {\n    return path.split('.').reduce((obj, prop) => {\n      return obj && obj[prop] ? obj[prop] : '';\n    }, obj);\n  };\n  const customSort = (rows, field, direction) => {\n    const handleField = row => {\n      if (field && isNaN(propExists(row, field))) {\n        return propExists(row, field).toLowerCase();\n      }\n      return row[field];\n    };\n    return orderBy(rows, handleField, direction);\n  };\n  const handleSort = (column, sortDirection) => console.log(column.selector, sortDirection, column);\n  const regex = searchQuery.length > 2 ? new RegExp(searchQuery.toLowerCase(), 'g') : null;\n  const filtered = searchQuery.length < 3 ? data && data.reviews : data && data.reviews.filter(review => {\n    return review.user.name.toLowerCase().search(regex) > -1 || review.user.email.toLowerCase().search(regex) > -1;\n  });\n  const globalClasses = useGlobalStyles();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: globalClasses.flex,\n      fluid: true,\n      children: [errorQuery && /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: /*#__PURE__*/_jsxDEV(\"td\", {\n          children: \"\".concat(t('Error'), \" \").concat(errorQuery.message)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), loadingQuery ? /*#__PURE__*/_jsxDEV(CustomLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n        title: /*#__PURE__*/_jsxDEV(TableHeader, {\n          title: t('Ratings')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 20\n        }, this),\n        subHeader: true,\n        subHeaderComponent: /*#__PURE__*/_jsxDEV(SearchBar, {\n          value: searchQuery,\n          onChange: onChangeSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this),\n        columns: columns,\n        data: filtered,\n        pagination: true,\n        progressPending: loadingQuery,\n        progressComponent: /*#__PURE__*/_jsxDEV(CustomLoader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 32\n        }, this),\n        onSort: handleSort,\n        sortFunction: customSort,\n        defaultSortField: \"order.user.name\",\n        customStyles: customStyles,\n        selectableRows: true,\n        paginationIconLastPage: \"\",\n        paginationIconFirstPage: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Ratings, \"fAV4v5MSenJM1byl50X4XJwNtZk=\", false, function () {\n  return [useQuery, useGlobalStyles];\n});\n_c = Ratings;\nexport default withTranslation()(Ratings);\nvar _c;\n$RefreshReg$(_c, \"Ratings\");","map":{"version":3,"names":["React","useState","withTranslation","Container","Header","DataTable","orderBy","CustomLoader","useQuery","gql","reviews","useGlobalStyles","SearchBar","customStyles","TableHeader","Fragment","_Fragment","jsxDEV","_jsxDEV","REVIEWS","_templateObject","_taggedTemplateLiteral","Ratings","props","_s","t","searchQuery","setSearchQuery","onChangeSearch","e","target","value","restaurantId","localStorage","getItem","data","error","errorQuery","loading","loadingQuery","variables","restaurant","columns","name","sortable","selector","cell","row","children","order","user","email","items","map","_ref","title","description","rating","propExists","obj","path","split","reduce","prop","customSort","rows","field","direction","handleField","isNaN","toLowerCase","handleSort","column","sortDirection","console","log","regex","length","RegExp","filtered","filter","review","search","globalClasses","fileName","_jsxFileName","lineNumber","columnNumber","className","flex","fluid","concat","message","subHeader","subHeaderComponent","onChange","pagination","progressPending","progressComponent","onSort","sortFunction","defaultSortField","selectableRows","paginationIconLastPage","paginationIconFirstPage","_c","$RefreshReg$"],"sources":["/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/src/views/Rating.jsx"],"sourcesContent":["/* eslint-disable react/display-name */\nimport React, { useState } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { Container } from '@mui/material'\nimport Header from '../components/Headers/Header'\nimport DataTable from 'react-data-table-component'\nimport orderBy from 'lodash/orderBy'\nimport CustomLoader from '../components/Loader/CustomLoader'\nimport { useQuery, gql } from '@apollo/client'\nimport { reviews } from '../apollo'\nimport useGlobalStyles from '../utils/globalStyles'\nimport SearchBar from '../components/TableHeader/SearchBar'\nimport { customStyles } from '../utils/tableCustomStyles'\nimport TableHeader from '../components/TableHeader'\n\nconst REVIEWS = gql`\n  ${reviews}\n`\n\nconst Ratings = props => {\n  const { t } = props\n  const [searchQuery, setSearchQuery] = useState('')\n  const onChangeSearch = e => setSearchQuery(e.target.value)\n  const restaurantId = localStorage.getItem('restaurantId')\n\n  const { data, error: errorQuery, loading: loadingQuery } = useQuery(REVIEWS, {\n    variables: { restaurant: restaurantId }\n  })\n\n  const columns = [\n    {\n      name: t('Name'),\n      sortable: true,\n      selector: 'user.name',\n      cell: row => <>{row.order.user.name}</>\n    },\n    {\n      name: t('Email'),\n      sortable: true,\n      selector: 'user.email',\n      cell: row => <>{row.order.user.email}</>\n    },\n    {\n      name: t('Items'),\n      cell: row => (\n        <>\n          {row.order.items.map(({ title }) => {\n            return title + '\\t'\n          })}\n        </>\n      )\n    },\n    {\n      name: t('Review'),\n      sortable: true,\n      selector: 'description',\n      cell: row => <>{row.description}</>\n    },\n    {\n      name: t('Ratings'),\n      sortable: true,\n      selector: 'rating',\n      cell: row => <>{row.rating}</>\n    }\n  ]\n  const propExists = (obj, path) => {\n    return path.split('.').reduce((obj, prop) => {\n      return obj && obj[prop] ? obj[prop] : ''\n    }, obj)\n  }\n\n  const customSort = (rows, field, direction) => {\n    const handleField = row => {\n      if (field && isNaN(propExists(row, field))) {\n        return propExists(row, field).toLowerCase()\n      }\n\n      return row[field]\n    }\n\n    return orderBy(rows, handleField, direction)\n  }\n\n  const handleSort = (column, sortDirection) =>\n    console.log(column.selector, sortDirection, column)\n\n  const regex =\n    searchQuery.length > 2 ? new RegExp(searchQuery.toLowerCase(), 'g') : null\n  const filtered =\n    searchQuery.length < 3\n      ? data && data.reviews\n      : data &&\n        data.reviews.filter(review => {\n          return (\n            review.user.name.toLowerCase().search(regex) > -1 ||\n            review.user.email.toLowerCase().search(regex) > -1\n          )\n        })\n  const globalClasses = useGlobalStyles()\n  return (\n    <>\n      <Header />\n      {/* Page content */}\n      <Container className={globalClasses.flex} fluid>\n        {errorQuery && (\n          <tr>\n            <td>{`${t('Error')} ${errorQuery.message}`}</td>\n          </tr>\n        )}\n        {loadingQuery ? (\n          <CustomLoader />\n        ) : (\n          <DataTable\n            title={<TableHeader title={t('Ratings')} />}\n            subHeader={true}\n            subHeaderComponent={\n              <SearchBar value={searchQuery} onChange={onChangeSearch} />\n            }\n            columns={columns}\n            data={filtered}\n            pagination\n            progressPending={loadingQuery}\n            progressComponent={<CustomLoader />}\n            onSort={handleSort}\n            sortFunction={customSort}\n            defaultSortField=\"order.user.name\"\n            customStyles={customStyles}\n            selectableRows\n            paginationIconLastPage=\"\"\n            paginationIconFirstPage=\"\"\n          />\n        )}\n      </Container>\n    </>\n  )\n}\n\nexport default withTranslation()(Ratings)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}