{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import{useQuery,gql,useMutation}from'@apollo/client';import React,{useState}from'react';import CustomLoader from'../components/Loader/CustomLoader';import DataTable from'react-data-table-component';import{updateWithdrawReqStatus,withdrawRequestQuery}from'../apollo';import Header from'../components/Headers/Header';import{Box,Container,MenuItem,Select}from'@mui/material';import{customStyles}from'../utils/tableCustomStyles';import useGlobalStyles from'../utils/globalStyles';import SearchBar from'../components/TableHeader/SearchBar';import{ReactComponent as WithdrawIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/svg/svg/Request.svg\";import TableHeader from'../components/TableHeader';import{withTranslation,useTranslation}from'react-i18next';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WithdrawRequest(){const{t}=useTranslation();const[searchQuery,setSearchQuery]=useState('');const onChangeSearch=e=>setSearchQuery(e.target.value);const{loading,error,data}=useQuery(gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n      \",\"\\n    \"])),withdrawRequestQuery));const[updateStatus]=useMutation(gql(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n      \",\"\\n    \"])),updateWithdrawReqStatus));const handleSort=(column,sortDirection)=>console.log(column.selector,sortDirection);const columns=[{name:t('RequestID'),selector:'requestId'},{name:t('Rider'),sortable:true,selector:'rider',cell:row=>/*#__PURE__*/_jsx(_Fragment,{children:row.rider?row.rider.name:null})},{name:t('Amount'),selector:'requestAmount'},{name:t('Date'),selector:'requestTime',cell:row=>/*#__PURE__*/_jsx(_Fragment,{children:new Date(row.requestTime).toDateString()})},{name:t('Status'),selector:'status',cell:row=>/*#__PURE__*/_jsxs(\"div\",{children:[row.status,/*#__PURE__*/_jsx(\"br\",{}),updateRequestStatus(row)]})}];const regex=searchQuery.length>2?new RegExp(searchQuery.toLowerCase(),'g'):null;const filtered=searchQuery.length<3?data&&data.getAllWithdrawRequests.data:data&&data.getAllWithdrawRequests.data.filter(request=>{return request.requestId.toLowerCase().search(regex)>-1||request.rider.name.toLowerCase().search(regex)>-1;});const updateRequestStatus=row=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Select,{id:\"input-status\",name:\"input-status\",displayEmpty:true,inputProps:{'aria-label':'Without label'},defaultValue:row.status,value:row.status,className:globalClasses.selectInput,children:[/*#__PURE__*/_jsx(MenuItem,{style:{color:'black'},value:'',children:t('Status')}),/*#__PURE__*/_jsx(MenuItem,{style:{color:'black'},value:'',onClick:()=>{if(row.status!=='REQUESTED'){updateStatus({variables:{id:row._id,status:'REQUESTED'}});}},children:t('REQUESTED')}),/*#__PURE__*/_jsx(MenuItem,{style:{color:'black'},value:'',onClick:()=>{if(row.status!=='TRANSFERRED'){updateStatus({variables:{id:row._id,status:'TRANSFERRED'}});}},children:t('TRANSFERRED')}),/*#__PURE__*/_jsx(MenuItem,{style:{color:'black'},value:'',onClick:()=>{if(row.status!=='CANCELLED'){updateStatus({variables:{id:row._id,status:'CANCELLED'}});}},children:t('CANCELLEDStatus')})]})});};const globalClasses=useGlobalStyles();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Box,{className:globalClasses.flexRow,mb:3,children:/*#__PURE__*/_jsx(WithdrawIcon,{})}),/*#__PURE__*/_jsxs(Container,{className:globalClasses.flex,fluid:true,children:[error?/*#__PURE__*/_jsxs(\"span\",{children:[\" `Error! $\",error.message,\"`\"]}):null,loading?/*#__PURE__*/_jsx(CustomLoader,{}):/*#__PURE__*/_jsx(DataTable,{subHeader:true,subHeaderComponent:/*#__PURE__*/_jsx(SearchBar,{value:searchQuery,onChange:onChangeSearch,placeh:true// onClick={() => refetch()}\n}),title:/*#__PURE__*/_jsx(TableHeader,{title:t('WithdrawRequests')}),columns:columns,data:filtered,pagination:true,progressPending:loading,progressComponent:/*#__PURE__*/_jsx(CustomLoader,{}),onSort:handleSort,selectableRows:true,customStyles:customStyles})]})]});}export default withTranslation()(WithdrawRequest);","map":{"version":3,"names":["useQuery","gql","useMutation","React","useState","CustomLoader","DataTable","updateWithdrawReqStatus","withdrawRequestQuery","Header","Box","Container","MenuItem","Select","customStyles","useGlobalStyles","SearchBar","ReactComponent","WithdrawIcon","TableHeader","withTranslation","useTranslation","Fragment","_Fragment","jsx","_jsx","jsxs","_jsxs","WithdrawRequest","t","searchQuery","setSearchQuery","onChangeSearch","e","target","value","loading","error","data","_templateObject","_taggedTemplateLiteral","updateStatus","_templateObject2","handleSort","column","sortDirection","console","log","selector","columns","name","sortable","cell","row","children","rider","Date","requestTime","toDateString","status","updateRequestStatus","regex","length","RegExp","toLowerCase","filtered","getAllWithdrawRequests","filter","request","requestId","search","id","displayEmpty","inputProps","defaultValue","className","globalClasses","selectInput","style","color","onClick","variables","_id","flexRow","mb","flex","fluid","message","subHeader","subHeaderComponent","onChange","placeh","title","pagination","progressPending","progressComponent","onSort","selectableRows"],"sources":["/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/src/views/WithdrawRequest.jsx"],"sourcesContent":["import { useQuery, gql, useMutation } from '@apollo/client'\nimport React, { useState } from 'react'\nimport CustomLoader from '../components/Loader/CustomLoader'\nimport DataTable from 'react-data-table-component'\nimport { updateWithdrawReqStatus, withdrawRequestQuery } from '../apollo'\nimport Header from '../components/Headers/Header'\nimport { Box, Container, MenuItem, Select } from '@mui/material'\nimport { customStyles } from '../utils/tableCustomStyles'\nimport useGlobalStyles from '../utils/globalStyles'\nimport SearchBar from '../components/TableHeader/SearchBar'\nimport { ReactComponent as WithdrawIcon } from '../assets/svg/svg/Request.svg'\nimport TableHeader from '../components/TableHeader'\nimport { withTranslation, useTranslation } from 'react-i18next'\n\nfunction WithdrawRequest() {\n  const { t } = useTranslation()\n  const [searchQuery, setSearchQuery] = useState('')\n  const onChangeSearch = e => setSearchQuery(e.target.value)\n  const { loading, error, data } = useQuery(\n    gql`\n      ${withdrawRequestQuery}\n    `\n  )\n  const [updateStatus] = useMutation(\n    gql`\n      ${updateWithdrawReqStatus}\n    `\n  )\n\n  const handleSort = (column, sortDirection) =>\n    console.log(column.selector, sortDirection)\n\n  const columns = [\n    {\n      name: t('RequestID'),\n      selector: 'requestId'\n    },\n    {\n      name: t('Rider'),\n      sortable: true,\n      selector: 'rider',\n      cell: row => <>{row.rider ? row.rider.name : null}</>\n    },\n\n    {\n      name: t('Amount'),\n      selector: 'requestAmount'\n    },\n    {\n      name: t('Date'),\n      selector: 'requestTime',\n      cell: row => <>{new Date(row.requestTime).toDateString()}</>\n    },\n    {\n      name: t('Status'),\n      selector: 'status',\n      cell: row => (\n        <div>\n          {row.status}\n          <br />\n          {updateRequestStatus(row)}\n        </div>\n      )\n    }\n  ]\n\n  const regex =\n    searchQuery.length > 2 ? new RegExp(searchQuery.toLowerCase(), 'g') : null\n  const filtered =\n    searchQuery.length < 3\n      ? data && data.getAllWithdrawRequests.data\n      : data &&\n        data.getAllWithdrawRequests.data.filter(request => {\n          return (\n            request.requestId.toLowerCase().search(regex) > -1 ||\n            request.rider.name.toLowerCase().search(regex) > -1\n          )\n        })\n\n  const updateRequestStatus = row => {\n    return (\n      <>\n        <Select\n          id=\"input-status\"\n          name=\"input-status\"\n          displayEmpty\n          inputProps={{ 'aria-label': 'Without label' }}\n          defaultValue={row.status}\n          value={row.status}\n          className={globalClasses.selectInput}>\n          <MenuItem style={{ color: 'black' }} value={''}>\n            {t('Status')}\n          </MenuItem>\n          <MenuItem\n            style={{ color: 'black' }}\n            value={''}\n            onClick={() => {\n              if (row.status !== 'REQUESTED') {\n                updateStatus({\n                  variables: {\n                    id: row._id,\n                    status: 'REQUESTED'\n                  }\n                })\n              }\n            }}>\n            {t('REQUESTED')}\n          </MenuItem>\n          <MenuItem\n            style={{ color: 'black' }}\n            value={''}\n            onClick={() => {\n              if (row.status !== 'TRANSFERRED') {\n                updateStatus({\n                  variables: {\n                    id: row._id,\n                    status: 'TRANSFERRED'\n                  }\n                })\n              }\n            }}>\n            {t('TRANSFERRED')}\n          </MenuItem>\n          <MenuItem\n            style={{ color: 'black' }}\n            value={''}\n            onClick={() => {\n              if (row.status !== 'CANCELLED') {\n                updateStatus({\n                  variables: {\n                    id: row._id,\n                    status: 'CANCELLED'\n                  }\n                })\n              }\n            }}>\n            {t('CANCELLEDStatus')}\n          </MenuItem>\n        </Select>\n      </>\n    )\n  }\n  const globalClasses = useGlobalStyles()\n\n  return (\n    <>\n      <Header />\n      <Box className={globalClasses.flexRow} mb={3}>\n        <WithdrawIcon />\n      </Box>\n      <Container className={globalClasses.flex} fluid>\n        {error ? <span> `Error! ${error.message}`</span> : null}\n        {loading ? (\n          <CustomLoader />\n        ) : (\n          <DataTable\n            subHeader={true}\n            subHeaderComponent={\n              <SearchBar\n                value={searchQuery}\n                onChange={onChangeSearch}\n                placeh\n                // onClick={() => refetch()}\n              />\n            }\n            title={<TableHeader title={t('WithdrawRequests')} />}\n            columns={columns}\n            data={filtered}\n            pagination\n            progressPending={loading}\n            progressComponent={<CustomLoader />}\n            onSort={handleSort}\n            selectableRows\n            customStyles={customStyles}\n          />\n        )}\n      </Container>\n    </>\n  )\n}\nexport default withTranslation()(WithdrawRequest)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}