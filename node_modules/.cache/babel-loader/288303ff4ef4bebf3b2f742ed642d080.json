{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useRef,useState,useEffect}from'react';import{withTranslation}from'react-i18next';import{useMutation,gql}from'@apollo/client';import{validateFunc}from'../../../constraints/constraints';import{saveStripeConfiguration}from'../../../apollo';import useStyles from'../styles';import useGlobalStyles from'../../../utils/globalStyles';import{Box,Typography,Input,Button,Alert}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SAVE_STRIPE_CONFIGURATION=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  \",\"\\n\"])),saveStripeConfiguration);function Stripe(props){const{t}=props;const formRef=useRef();const publishableKey=props.publishableKey||'';const secretKey=props.secretKey||'';const[publishError,publishErrorSetter]=useState(null);const[secretError,secretErrorSetter]=useState(null);const onBlur=(setter,field,state)=>{setter(!validateFunc({[field]:state},field));};const[mutate,{loading}]=useMutation(SAVE_STRIPE_CONFIGURATION);const validateInput=()=>{let publishableKeyResult=true;let secretKeyResult=true;publishableKeyResult=!!formRef.current['input-publishablekey'].value;secretKeyResult=!!formRef.current['input-secretkey'].value;publishErrorSetter(publishableKeyResult);secretErrorSetter(secretKeyResult);return publishableKeyResult&&secretKeyResult;};const classes=useStyles();const globalClasses=useGlobalStyles();const[successMessage,setSuccessMessage]=useState('');const handleSuccess=message=>{setSuccessMessage(message);};useEffect(()=>{const timeoutId=setTimeout(()=>{setSuccessMessage('');},3000);return()=>clearTimeout(timeoutId);},[successMessage,setSuccessMessage]);const[errorMessage,setErrorMessage]=useState('');const handleError=error=>{setErrorMessage('An error occurred while saving configuration.');console.error('Mutation error:',error);};useEffect(()=>{const timeoutId=setTimeout(()=>{setErrorMessage('');},3000);return()=>clearTimeout(timeoutId);},[errorMessage,setErrorMessage]);return/*#__PURE__*/_jsxs(Box,{container:true,className:classes.container,children:[/*#__PURE__*/_jsx(Box,{className:classes.flexRow,children:/*#__PURE__*/_jsx(Box,{item:true,className:classes.heading,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",className:classes.text,children:t('Stripe')})})}),/*#__PURE__*/_jsx(Box,{className:classes.form,children:/*#__PURE__*/_jsxs(\"form\",{ref:formRef,children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{className:classes.labelText,children:t('PublishKey')}),/*#__PURE__*/_jsx(Input,{style:{marginTop:-1},id:\"input-publishablekey\",name:\"input-publishablekey\",placeholder:\"publish key e.g pk_test_lEaBbVGnTkzja2FyFiNlbqtw\",type:\"password\",defaultValue:publishableKey,onBlur:event=>{onBlur(publishErrorSetter,'publishableKey',event.target.value.trim());},disableUnderline:true,className:[globalClasses.input,publishError===false?globalClasses.inputError:publishError===true?globalClasses.inputSuccess:'']})]}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{className:classes.labelText,children:t('Secret Key')}),/*#__PURE__*/_jsx(Input,{style:{marginTop:-1},id:\"input-secretkey\",placeholder:\"Secret e.g sk_test_rKNqVc2tSkdgZHNO3XnPCLn4\",type:\"password\",defaultValue:secretKey,onBlur:event=>onBlur(secretErrorSetter,'secretKey',event.target.value.trim()),disableUnderline:true,className:[globalClasses.input,secretError===false?globalClasses.inputError:secretError===true?globalClasses.inputSuccess:'']})]}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Button,{className:globalClasses.button,disabled:loading,onClick:e=>{e.preventDefault();if(validateInput()&&!loading){mutate({variables:{configurationInput:{publishableKey:formRef.current['input-publishablekey'].value,secretKey:formRef.current['input-secretkey'].value}},onCompleted:data=>{handleSuccess('Configuration saved successfully!');},onError:error=>{handleError(error);}});}},children:t('Save')})}),/*#__PURE__*/_jsxs(Box,{mt:2,children:[successMessage&&/*#__PURE__*/_jsx(Alert,{className:globalClasses.alertSuccess,variant:\"filled\",severity:\"success\",children:successMessage}),errorMessage&&/*#__PURE__*/_jsx(Alert,{className:globalClasses.alertError,variant:\"filled\",severity:\"error\",children:errorMessage})]})]})})]});}export default withTranslation()(Stripe);","map":{"version":3,"names":["React","useRef","useState","useEffect","withTranslation","useMutation","gql","validateFunc","saveStripeConfiguration","useStyles","useGlobalStyles","Box","Typography","Input","Button","Alert","jsx","_jsx","jsxs","_jsxs","SAVE_STRIPE_CONFIGURATION","_templateObject","_taggedTemplateLiteral","Stripe","props","t","formRef","publishableKey","secretKey","publishError","publishErrorSetter","secretError","secretErrorSetter","onBlur","setter","field","state","mutate","loading","validateInput","publishableKeyResult","secretKeyResult","current","value","classes","globalClasses","successMessage","setSuccessMessage","handleSuccess","message","timeoutId","setTimeout","clearTimeout","errorMessage","setErrorMessage","handleError","error","console","container","className","children","flexRow","item","heading","variant","text","form","ref","labelText","style","marginTop","id","name","placeholder","type","defaultValue","event","target","trim","disableUnderline","input","inputError","inputSuccess","button","disabled","onClick","e","preventDefault","variables","configurationInput","onCompleted","data","onError","mt","alertSuccess","severity","alertError"],"sources":["/Users/gauravyadav/Downloads/food-delivery-multivendor-main/enatega-multivendor-admin/src/components/Configuration/Stripe/Stripe.jsx"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react'\nimport { withTranslation } from 'react-i18next'\nimport { useMutation, gql } from '@apollo/client'\nimport { validateFunc } from '../../../constraints/constraints'\nimport { saveStripeConfiguration } from '../../../apollo'\nimport useStyles from '../styles'\nimport useGlobalStyles from '../../../utils/globalStyles'\nimport { Box, Typography, Input, Button, Alert } from '@mui/material'\n\nconst SAVE_STRIPE_CONFIGURATION = gql`\n  ${saveStripeConfiguration}\n`\n\nfunction Stripe(props) {\n  const { t } = props\n  const formRef = useRef()\n  const publishableKey = props.publishableKey || ''\n  const secretKey = props.secretKey || ''\n  const [publishError, publishErrorSetter] = useState(null)\n  const [secretError, secretErrorSetter] = useState(null)\n\n  const onBlur = (setter, field, state) => {\n    setter(!validateFunc({ [field]: state }, field))\n  }\n  const [mutate, { loading }] = useMutation(SAVE_STRIPE_CONFIGURATION)\n\n  const validateInput = () => {\n    let publishableKeyResult = true\n    let secretKeyResult = true\n    publishableKeyResult = !!formRef.current['input-publishablekey'].value\n    secretKeyResult = !!formRef.current['input-secretkey'].value\n    publishErrorSetter(publishableKeyResult)\n    secretErrorSetter(secretKeyResult)\n    return publishableKeyResult && secretKeyResult\n  }\n\n  const classes = useStyles()\n  const globalClasses = useGlobalStyles()\n  const [successMessage, setSuccessMessage] = useState('')\n  const handleSuccess = message => {\n    setSuccessMessage(message)\n  }\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setSuccessMessage('')\n    }, 3000)\n\n    return () => clearTimeout(timeoutId)\n  }, [successMessage, setSuccessMessage])\n  const [errorMessage, setErrorMessage] = useState('')\n  const handleError = error => {\n    setErrorMessage('An error occurred while saving configuration.')\n    console.error('Mutation error:', error)\n  }\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setErrorMessage('')\n    }, 3000)\n\n    return () => clearTimeout(timeoutId)\n  }, [errorMessage, setErrorMessage])\n\n  return (\n    <Box container className={classes.container}>\n      <Box className={classes.flexRow}>\n        <Box item className={classes.heading}>\n          <Typography variant=\"h6\" className={classes.text}>\n            {t('Stripe')}\n          </Typography>\n        </Box>\n      </Box>\n\n      <Box className={classes.form}>\n        <form ref={formRef}>\n          <Box>\n            <Typography className={classes.labelText}>\n              {t('PublishKey')}\n            </Typography>\n            <Input\n              style={{ marginTop: -1 }}\n              id=\"input-publishablekey\"\n              name=\"input-publishablekey\"\n              placeholder=\"publish key e.g pk_test_lEaBbVGnTkzja2FyFiNlbqtw\"\n              type=\"password\"\n              defaultValue={publishableKey}\n              onBlur={event => {\n                onBlur(\n                  publishErrorSetter,\n                  'publishableKey',\n                  event.target.value.trim()\n                )\n              }}\n              disableUnderline\n              className={[\n                globalClasses.input,\n                publishError === false\n                  ? globalClasses.inputError\n                  : publishError === true\n                  ? globalClasses.inputSuccess\n                  : ''\n              ]}\n            />\n          </Box>\n          <Box>\n            <Typography className={classes.labelText}>\n              {t('Secret Key')}\n            </Typography>\n            <Input\n              style={{ marginTop: -1 }}\n              id=\"input-secretkey\"\n              placeholder=\"Secret e.g sk_test_rKNqVc2tSkdgZHNO3XnPCLn4\"\n              type=\"password\"\n              defaultValue={secretKey}\n              onBlur={event =>\n                onBlur(\n                  secretErrorSetter,\n                  'secretKey',\n                  event.target.value.trim()\n                )\n              }\n              disableUnderline\n              className={[\n                globalClasses.input,\n                secretError === false\n                  ? globalClasses.inputError\n                  : secretError === true\n                  ? globalClasses.inputSuccess\n                  : ''\n              ]}\n            />\n          </Box>\n          <Box>\n            <Button\n              className={globalClasses.button}\n              disabled={loading}\n              onClick={e => {\n                e.preventDefault()\n                if (validateInput() && !loading) {\n                  mutate({\n                    variables: {\n                      configurationInput: {\n                        publishableKey:\n                          formRef.current['input-publishablekey'].value,\n                        secretKey: formRef.current['input-secretkey'].value\n                      }\n                    },\n                    onCompleted: data => {\n                      handleSuccess('Configuration saved successfully!')\n                    },\n                    onError: error => {\n                      handleError(error)\n                    }\n                  })\n                }\n              }}>\n              {t('Save')}\n            </Button>\n          </Box>\n          <Box mt={2}>\n            {successMessage && (\n              <Alert\n                className={globalClasses.alertSuccess}\n                variant=\"filled\"\n                severity=\"success\">\n                {successMessage}\n              </Alert>\n            )}\n            {errorMessage && (\n              <Alert\n                className={globalClasses.alertError}\n                variant=\"filled\"\n                severity=\"error\">\n                {errorMessage}\n              </Alert>\n            )}\n          </Box>\n        </form>\n      </Box>\n    </Box>\n  )\n}\nexport default withTranslation()(Stripe)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}